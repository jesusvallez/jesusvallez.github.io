---
import type { Experience } from '../@types'
import Card from './Card.astro'
import ExperienceItem from './ExperienceItem.astro'

interface Props {
  name: string
  job: Experience[]
}

const { name, job } = Astro.props
---

<section class="mx-auto w-full">
  <div class="flex flex-row items-center gap-2">
    <slot name="icon" />
    <h2
      class="inline bg-gradient-to-bl from-my-tertiary to-my-tertiary bg-[length:90%_35%] bg-bottom bg-no-repeat text-h6 font-extrabold uppercase"
    >
      {name}
    </h2>
  </div>

  <div class="red mt-4 w-full space-y-4 sm:space-y-6">
    {
      job.map((work) => (
        <Card class="flex flex-col items-start gap-1">
          <div>
            <h3 class="inline bg-gradient-to-bl from-my-secondary to-my-secondary bg-[length:90%_18%] bg-bottom bg-no-repeat text-h5 font-extrabold">
              {work.name}
            </h3>
          </div>
          <p class="mb-2 inline text-caption font-medium text-my-primary">{work.location}</p>
          <ul class="w-full space-y-8">
            {work.job.map((workspace) => (
              <li>
                <div class="mb-2 flex flex-col justify-between md:flex-row md:items-center">
                  <h4 class="text-h6 font-bold">{workspace.name}</h4>
                  <p class="text-body2 font-medium text-neutral-400">
                    {workspace.startDate} - {workspace.endDate}
                  </p>
                </div>

                <ExperienceItem description={workspace.description} />

                <ul class="flex flex-row flex-wrap gap-2 pt-4">
                  {workspace.technologies.map((tech) => (
                    <li class="whitespace-nowrap rounded-full bg-[#323232] px-2 py-1 text-xs text-white">{tech}</li>
                  ))}
                </ul>
              </li>
            ))}
          </ul>
        </Card>
      ))
    }
  </div>
</section>
